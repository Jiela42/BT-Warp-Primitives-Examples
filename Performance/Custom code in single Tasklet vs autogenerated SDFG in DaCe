# Custom code in single Tasklet vs autogenerated SDFG in DaCe

Test values: a[i] = i % 131

Maximum Number of threads = 2048 * 256 = 524288

Maximum Number of atomic adds = 8 * 2048 = 16384

### Correct values:

| Value | Performance Naive (ms) | Performance actual Reduction (ms) | Shared Memory only one atomic add/block | Naive it/s | Reduction it/s | Shared it/s | naive/reduction (ms) | naive/shared |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 14 | 0.02046546433120966 | 0.0074999406933784485 | 0.00791996717453003 | 46675.98it/s | 122856.00it/s | 118282.68it/s | 2.7287501552216 | 2.58403398400752 |
| 200 | 0.02090493217110634 | 0.00779004767537117 | 0.008230097591876984 | 45491.37it/s | 117520.43it/s | 112598.77it/s | 2.6835435471337 | 2.5400588434989250463 |
| 1234 | 0.021230429410934448 | 0.00779004767537117 |  | 44663.02it/s | 117586.32it/s |  | 2.725327275987805591 |  |
| 12345 | 0.024719862267374992 | 0.008280156180262566 |  | 38227.34it/s | 109913.63it/s |  | 2.98543429969350 |  |
| 15000 | 0.024430453777313232 | 0.008479924872517586 | 0.008470029570162296 | 39100.44it/s | 111077.97it/s | 110028.96it/s | 2.8809752615249442670 | 2.8843410256057836866 |
| 50000 | 0.02573512028902769 | 0.011389958672225475 |  | 37286.02it/s | 80908.64it/s |  | 2.25945686280522080579 |  |
| 70000 | 0.026120338588953018 | 0.013009877875447273 |  | 36892.46it/s | 70445.15it/s |  | 2.007731266889775782239 |  |
| 80000 | 0.025519984774291515 | 0.013619894161820412 | 0.025215093046426773 | 37546.36it/s | 70563.66it/s | 37923.18it/s | 1.87372856727695430427531 | 1.012091636041293456990 |
| 90000 | 0.19026105292141438 | 0.01440045889467001 | 0.013715005479753017 | 5169.54it/s | 67033.79it/s | 70115.41it/s | 13.21215207883653058158 | 13.8724737078880587 |
| 100000 | 0.20715093705803156 | 0.015070079825818539 | 0.013910001143813133 | 4757.44it/s | 64142.90it/s | 68894.61it/s | 13.7458420560675 | 14.8922300520563081812 |
| 123456 | 0.20767550449818373 | 0.01689500641077757 | 0.014905002899467945 | 5188.85it/s | 57244.49it/s | 64448.43it/s | 12.292123450495082 | 13.9332750150351865 |
| 150 000 | 0.19246595911681652 | 0.018770107999444008 | 0.015840050764381886 | 5111.64it/s | 51539.74it/s | 5188.59it/s | 10.253854646042397899 | 12.1505897916436992971 |
| 524 288 | 0.1982060493901372 | 0.046294997446238995 | 0.03697001375257969 | 4953.12it/s | 21309.27it/s | 26654.19it/s | 4.281370781374553394 | 5.361265232862046 |
| 1000000 | 0.26691099628806114 | 0.04789500962942839 |  | 3704.04it/s | 20665.67it/s |  | 5.572835215050496 |  |
| 1234567 | 0.4653510404750705 | 0.050359987653791904 | 0.0489954836666584 | 3064.49it/s | 19713.78it/s |  | 9.24049155202744461 | 9.49783542583422907679130 |
| 12345678 | 2.104915911331773 | 0.3450853982940316 |  | 359.69it/s | 2892.58it/s |  | 6.099695674571167225 |  |
| 123456789 | 12.168158544227481 | 3.3750495640560985 | 3.3767519053071737 | 56.01it/s | 295.63it/s | 295.56it/s | 3.605327362838463945 | 3.603509788534665108975 |

1234567891 causes an error (I am assuming too big of a number ;))